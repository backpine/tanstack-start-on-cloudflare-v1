import{d as e,j as r,r as s,b as n}from"./ssr.mjs";import"node:buffer";import"../nitro/nitro.mjs";import"node:process";import"node:events";import"node:timers";import"node:async_hooks";import"node:stream";import"node:stream/web";const t=Symbol.for("TSR_DEFERRED_PROMISE");function useAwaited({promise:r}){const s=function(r){const s=r;return s[t]||(s[t]={status:"pending"},s.then((e=>{s[t].status="success",s[t].data=e})).catch((r=>{s[t].status="error",s[t].error={data:e(r),__isServerError:!0}}))),s}(r);if("pending"===s[t].status)throw s;if("error"===s[t].status)throw s[t].error;return[s[t].data,s]}function Await(e){const n=r.jsx(AwaitInner,{...e});return e.fallback?r.jsx(s.Suspense,{fallback:e.fallback,children:n}):n}function AwaitInner(e){const[r]=useAwaited(e);return e.children(r)}const SplitComponent=function(){const[e,t]=s.useState(0),{deferredStuff:o,deferredPerson:i,person:a}=n.useLoaderData();return r.jsxs("div",{className:"p-2",children:[r.jsxs("div",{"data-testid":"regular-person",children:[a.name," - ",a.randomNumber]}),r.jsx(s.Suspense,{fallback:r.jsx("div",{children:"Loading person..."}),children:r.jsx(Await,{promise:i,children:e=>r.jsxs("div",{"data-testid":"deferred-person",children:[e.name," - ",e.randomNumber]})})}),r.jsx(s.Suspense,{fallback:r.jsx("div",{children:"Loading stuff..."}),children:r.jsx(Await,{promise:o,children:e=>r.jsx("h3",{"data-testid":"deferred-stuff",children:e})})}),r.jsxs("div",{children:["Count: ",e]}),r.jsx("div",{children:r.jsx("button",{onClick:()=>t(e+1),children:"Increment"})})]})};export{SplitComponent as component};
//# sourceMappingURL=deferred-bZiemh_B.mjs.map
